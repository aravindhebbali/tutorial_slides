---
output: _output.yaml
---

## {data-background="gg_box.png"}

## Agenda

<hr>

- build box plots
- modify box 
    - color
    - fill
    - alpha
    - line size
    - line type
- modify outlier 
    - color
    - shape 
    - size 
    - alpha

## Intro

<hr>

The box plot is a standardized way of displaying the distribution of data based on the five number summary: minimum, first quartile, median, third quartile, and maximum. Box plots are useful for detecting outliers and for comparing distributions. It shows the shape, central tendancy and variability of the data.

## Structure

<hr>

- The body of the boxplot consists of a "box" (hence, the name), which goes from the first quartile (Q1) to the third quartile (Q3). 
- Within the box, a vertical line is drawn at the Q2, the median of the data set. 
- Two horizontal lines, called whiskers, extend from the front and back of the box. 
- The front whisker goes from Q1 to the smallest non-outlier in the data set, and the back whisker goes from Q3 to the largest non-outlier. 
- If the data set includes one or more outliers, they are plotted separately as points on the chart. 

## Libraries

<hr>

```{r show, eval=FALSE}
library(ggplot2)
library(dplyr)
library(tidyr)
```

```{r load, echo=FALSE, eval=TRUE, results='hide', message=FALSE}
library(ggplot2)
library(dplyr)
library(tidyr)
```

## Data

<hr>

```{r import2, eval=FALSE}
ecom <- readr::read_csv('https://raw.githubusercontent.com/rsquaredacademy/datasets/master/web.csv')
```

```{r import, echo=FALSE, eval=TRUE, message=FALSE}
ecom <- readr::read_csv('https://raw.githubusercontent.com/rsquaredacademy/datasets/master/web.csv')
ecom
```

## Data Dictionary

<hr>

- id: row id
- referrer: referrer website/search engine
- os: operating system
- browser: browser
- device: device used to visit the website
- n_pages: number of pages visited
- duration: time spent on the website (in seconds)
- repeat: frequency of visits
- country: country of origin
- purchase: whether visitor purchased
- order_value: order value of visitor (in dollars)


## Univariate Box Plot

<hr>

```{r box2, fig.align='center'}
ggplot(ecom) +
  geom_boxplot(aes(x = factor(1), y = n_visit))
```

## Box Plot

<hr>

```{r box3, fig.align='center'}
ggplot(ecom) +
  geom_boxplot(aes(x = factor(device), y = n_visit))
```

## Horizontal Box Plot

<hr>   

```{r box4, fig.align='center'}
ggplot(ecom) +
  geom_boxplot(aes(x = factor(device), y = n_visit)) +
  coord_flip()
```

## Notch

<hr>

```{r box5, fig.align='center'}
ggplot(ecom) +
  geom_boxplot(aes(x = factor(device), y = n_visit),
               notch = TRUE) 
```

## Jitter

<hr>

```{r box6, fig.align='center'}
ggplot(ecom, aes(x = factor(device), y = n_visit)) +
  geom_boxplot() +
  geom_jitter(width = 0.2, color = 'blue')
```

## {data-background="outliers.png"}

## Outliers

<hr>

- color
- shape
- size
- alpha

## Outlier Color

<hr>

```{r box7, fig.align='center'}
ggplot(ecom) +
  geom_boxplot(aes(x = factor(device), y = duration),
               outlier.color = 'red')
```

## Outlier Shape

<hr>

```{r box8, fig.align='center'}
ggplot(ecom) +
  geom_boxplot(aes(x = factor(device), y = duration),
               outlier.shape = 23)
```

## Outlier Shape

<hr>


```{r box9, fig.align='center'}
ggplot(ecom) +
  geom_boxplot(aes(x = factor(device), y = duration), outlier.shape = 23) +
  expand_limits(y = c(0, 1100))
```

## Outlier Size

<hr>

```{r box10, fig.align='center'}
ggplot(ecom) +
  geom_boxplot(aes(x = factor(device), y = duration), outlier.size = 3) +
  expand_limits(y = c(0, 1100))
```

## Outlier Alpha

<hr>

```{r box11, fig.align='center'}
ggplot(ecom) +
  geom_boxplot(aes(x = factor(device), y = duration),
               outlier.color = 'blue', outlier.alpha = 0.3) +
  expand_limits(y = c(0, 1100))
```

## {data-background="aesthetics.png"}

## Box Aesthetics

<hr>

- color
- fill
- alpha
- line type
- line width


## Specify Values for Fill

<hr>

```{r box12, fig.align='center'}
ggplot(ecom) +
  geom_boxplot(aes(x = factor(device), y = duration),
               fill = c('blue', 'red', 'green')) +
  expand_limits(y = c(0, 1100))
```

## Map Fill to Variable

<hr>

```{r box13, fig.align='center'}
ggplot(ecom) +
  geom_boxplot(aes(x = factor(device), y = duration,
               fill = factor(device))) +
  expand_limits(y = c(0, 1100))
```

## Specify Values for Alpha

```{r box14, fig.align='center'}
ggplot(ecom) +
  geom_boxplot(aes(x = factor(device), y = duration),
               fill = 'blue', alpha = 0.3) +
  expand_limits(y = c(0, 1100))
```

## Specify Values for Color

<hr>

```{r box15, fig.align='center'}
ggplot(ecom) +
  geom_boxplot(aes(x = factor(device), y = duration),
               color = c('blue', 'red', 'green')) +
  expand_limits(y = c(0, 1100))
```

## Map Color to Variables

<hr>

```{r box16, fig.align='center'}
ggplot(ecom) +
  geom_boxplot(aes(x = factor(device), y = duration,
               color = factor(device))) +
  expand_limits(y = c(0, 1100))
```


## Specify Values for Line Width

<hr>

```{r box17, fig.align='center'}
ggplot(ecom) +
  geom_boxplot(aes(x = factor(device), y = duration),
               size = 1.5) +
  expand_limits(y = c(0, 1100))
```

## Specify Values for Line Type

<hr>

```{r box18, fig.align='center'}
ggplot(ecom) +
  geom_boxplot(aes(x = factor(device), y = duration),
               linetype = 2) +
  expand_limits(y = c(0, 1100))
```

## {data-background="thankyou.png"}

<!-- To do: -->
<!--   - add intro slide -->
<!--   - add intro -->
<!--   - outlier section -->
<!--   - aesthetics section -->