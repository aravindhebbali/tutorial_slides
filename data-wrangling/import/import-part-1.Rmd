---
title: "Importing Data into R: Part - 1"
output: 
  revealjs::revealjs_presentation:
    transition: slide
    incremental: true
    theme: default
    highlight: haddock
    center: false
    reveal_options:
      slideNumber: true
      previewLinks: true
---

<style type="text/css">
  .reveal p {
    text-align: left;
    font-size: 20px;
  }
  .reveal body:after {
    content: url(handshake.png);
    position: fixed;
    bottom: 3.5em;
    left: 3.5em;
    box-shadow: 5px 5px 10px #000; 
  }
  .reveal hr {
    border-color: #0077aa;
  }
  .reveal h1, h2, h3, h4, h5, h6 {
    text-transform: capitalize;
    text-align: center;
    color: #0077aa;
    font-family: 'Helvetica Neue';
  }
  .reveal ul {
    display: block;
  }
  .reveal ul li {
    color: #3c3c3c; 
    /* set color of list item text */
    list-style: none; 
  }

  .reveal ul li::before {
      color: #006b6e;  
      /* color of bullet or square */
      content: "\2022"; 
      /* Unicode of character to precede the list item */
      font-size: 1em; 
      /* em or %*/ 
      padding-right: 1.1225em; 
      /* use em*/
      position: relative;
      top: 0em; 
      /* use em or % */
  }
  .reveal ul {
    line-height:150%
  }
  .reveal .fragment {
    font-size: 20px;
  }
  .reveal ol {
    display: block;
  }
</style>

## Agenda

<hr>

* read data from delimited files
  - csv
  - tsv
  - txt

## Introdction

<hr>

Importing data is the first step in any data analysis workflow. If you cannot import data from differernt sources or file formats, you cannot proceed with data analysis. R allows you to import data from several sources and a variety of file formats. In this module, we will focus on different file formats.

## Libraries

<hr>

```{r importlib1,eval=FALSE}
library(readr)
```

```{r importlib2, echo=FALSE, eval=TRUE, results='hide', message=FALSE}
library(readr)
```


## CSV 

<hr>

- `read.csv()`
- `read_csv()`
- `read_delim()`

## CSV 

<hr>

- `col_names`
-  `skip`
- `n_max`
- `col_types`

## CSV 

<hr>

using base R

```{r import1}
read.csv('hsb2.csv', header = TRUE)
```

## CSV 

<hr>

using readr

```{r import2, echo=TRUE, results='markup', message=FALSE}
read_csv('hsb2.csv')
```

## CSV 

<hr>

using readr

```{r import3, echo=TRUE, results='markup', message=FALSE}
read_delim('hsb2.csv', delim = ',')
```

## CSV 

<hr>

data does not include column names

```{r import4, echo=TRUE, results='markup', message=FALSE}
read_csv('hsb2.csv', col_names = FALSE)
```

## CSV 

<hr>

data does not include column names

```{r import5, echo=TRUE, results='markup', message=FALSE}
read_delim('hsb2.csv', delim = ',', col_names = FALSE)
```

## CSV 

<hr>

skip a few lines

```{r import6, echo=TRUE, results='markup', message=FALSE}
read_csv('hsb2.csv', skip = 5)
```

## CSV 

<hr>

```{r import7, echo=TRUE, results='markup', message=FALSE}
read_delim('hsb2.csv', delim = ',', skip = 5)
```

## CSV 

<hr>

maximum number of lines to read

```{r import8, echo=TRUE, results='markup', message=FALSE}
read_csv('hsb2.csv', n_max = 50)
```

## CSV 

<hr>

maximum number of lines to read

```{r import9, echo=TRUE, results='markup', message=FALSE}
read_delim('hsb2.csv', delim = ',', n_max = 50)
```

## CSV 

<hr>

specify column types

```{r import10, echo=TRUE, results='markup', message=FALSE}
read_csv('hsb2.csv',
  col_types = list(col_integer(), col_factor(levels = c(0, 1)), 
                   col_factor(levels = c(1, 2, 3, 4)),
                   col_factor(levels = c(1, 2, 3)), 
                   col_factor(levels = c(1, 2)), 
                   col_factor(levels = c(1, 2, 3)),
                   col_integer(), col_integer(), col_integer(),
                   col_integer(), col_integer())            
)
```

## CSV 

<hr>

read only specific columns

```{r import11, echo=TRUE, results='markup', message=FALSE}
read_csv('hsb2.csv', 
  col_types = cols_only(id = col_integer(),
                        prog = col_factor(levels = c(1, 2, 3)),
                        read = col_integer())
)
```

## Parse Data

<hr>

```{r import12, eval = FALSE}
```

## Character

<hr>

`parse_character()`

```{r import13, eval = FALSE}
```

## Date

<hr>

`parse_date()`

```{r import14, eval = FALSE}
```

## Datetime

<hr>

`parse_datetime()`

```{r import15, eval = FALSE}
```

## Double

<hr>

`parse_double()`

```{r import16, eval = FALSE}
```

## Factor

<hr>

`parse_factor()`

```{r import17, eval = FALSE}
```

## Integer

<hr>

`parse_integer()`

```{r import18, eval = FALSE}
```

## Guess Data Type

<hr>

`parse_guess()`

```{r import19, eval = FALSE}
```

## Column Types

<hr>

`spec_csv()`

## Delimited Files

<hr>

semicolon separated values

```{r import20, echo=TRUE, results='markup', message=FALSE}
read.csv2('hsb.csv', header = TRUE)
```

## Delimited Files

<hr>

using readr

```{r import21, echo=TRUE, results='markup', message=FALSE}
read_csv2('hsb.csv')
```

## Delimited Files

<hr>

```{r import22, echo=TRUE, results='markup', message=FALSE}
read_delim('hsb.csv', delim = ';')
```

## Delimited Files

<hr>

data does not include column names

----

```{r import23, echo=TRUE, results='markup', message=FALSE}
read_csv2('hsb.csv', col_names = FALSE)
```

## Delimited Files

<hr>

```{r import24, echo=TRUE, results='markup', message=FALSE}
read_delim('hsb.csv', delim = ';', col_names = FALSE)
```

## Delimited Files

<hr>

skip a few lines

```{r import25, echo=TRUE, results='markup', message=FALSE}
read_csv2('hsb.csv', skip = 5)
```

## Delimited Files

<hr>

```{r import26, echo=TRUE, results='markup', message=FALSE}
read_delim('hsb.csv', delim = ';', skip = 5)
```

## Delimited Files

<hr>

maximum number of lines to read

```{r import27, echo=TRUE, results='markup', message=FALSE}
read_csv2('hsb.csv', n_max = 50)
```

## Delimited Files

<hr>

```{r import28, echo=TRUE, results='markup', message=FALSE}
read_delim('hsb.csv', delim = ';', n_max = 50)
```

## Delimited Files

<hr>

specify column types

```{r import29, echo=TRUE, results='markup', message=FALSE}
read_csv2('hsb.csv',
         col_types = list(col_integer(), col_factor(levels = c(0, 1)), 
                          col_factor(levels = c(1, 2, 3, 4)),
                          col_factor(levels = c(1, 2, 3)), 
                          col_factor(levels = c(1, 2)), 
                          col_factor(levels = c(1, 2, 3)),
                          col_integer(), col_integer(), col_integer(),
                          col_integer(), col_integer())            
)
```

## Delimited Files

<hr>

read only specific columns

```{r import30, echo=TRUE, results='markup', message=FALSE}
read_csv2('hsb.csv', 
         col_types = cols_only(id = col_integer(),
                               prog = col_factor(levels = c(1, 2, 3)),
                               read = col_integer())
)
```

## Delimited Files

<hr>

tab separated values

```{r import31}
read.delim('mtcars.tsv', dec = '.')  
```

## Delimited Files

<hr>

use read.delim2 if decimal separator is ,

```{r import32}
read.table('mtcars.tsv', sep = '\t', header = TRUE, dec = '.')
```

## Delimited Files

<hr>

using readr

----

```{r import33, echo=TRUE, results='markup', message=FALSE}
read_tsv('mtcars.tsv')
```

## Delimited Files

<hr>

```{r import34, echo=TRUE, results='markup', message=FALSE}
read_delim('mtcars.tsv', delim = '\t')
```

## Delimited Files

<hr>

data does not include column names

```{r import35, echo=TRUE, results='markup', message=FALSE}
read_tsv('mtcars.tsv', col_names = FALSE)
```

## Delimited Files

<hr>

```{r import36, echo=TRUE, results='markup', message=FALSE}
read_delim('mtcars.tsv', delim = '\t', col_names =  FALSE)
```

## Delimited Files

<hr>

skip a few lines

```{r import37, echo=TRUE, results='markup', message=FALSE}
read_tsv('mtcars.tsv', skip = 5)
```

## Delimited Files

<hr>

```{r import38, echo=TRUE, results='markup', message=FALSE}
read_delim('mtcars.tsv', delim = '\t', skip = 5)
```

## Delimited Files

<hr>

maximum number of lines to read

```{r import39, echo=TRUE, results='markup', message=FALSE}
read_tsv('mtcars.tsv', n_max = 10)
```

## Delimited Files

<hr>

```{r import40, echo=TRUE, results='markup', message=FALSE}
read_delim('mtcars.tsv', delim = '\t', n_max = 10)
```

## Delimited Files

<hr>

specify column types

```{r import41, echo=TRUE, results='markup', message=FALSE}
read_tsv('mtcars.tsv',
          col_types = list(col_double(), col_factor(levels = c(4, 6, 8)), 
                           col_double(), col_double(), col_double(),
                           col_double(), col_double(),
                           col_factor(levels = c(0, 1)), 
                           col_factor(levels = c(0, 1)), 
                           col_factor(levels = c(3, 4, 5)),
                           col_factor(levels = c(1, 2, 3, 4, 6, 8)))            
)
```

## Delimited Files

<hr>

read only specific columns

```{r import42, echo=TRUE, results='markup', message=FALSE}
read_tsv('mtcars.tsv', 
          col_types = cols_only(mpg = col_double(),
                                cyl = col_factor(levels = c(4, 6, 8)),
                                disp = col_double(),
                                gear = col_factor(levels = c(3, 4, 5)))
)
```

## Delimited Files

<hr>

space separated values

```{r import43}
read.table('hsb1.csv', header = TRUE, sep = " ")
```

## Delimited Files

<hr>

```{r import44, eval = FALSE}
read_table('hsb1.csv')  # fails
```

## Delimited Files

<hr>

```{r import45, echo=TRUE, results='markup', message=FALSE}
read_table2('hsb1.csv')
```

## Delimited Files

<hr>

data does not include column names

```{r import46, echo=TRUE, results='markup', message=FALSE}
read_table2('hsb1.csv', col_names = FALSE)
```

## Delimited Files

<hr>

skip a few lines

```{r import47, echo=TRUE, results='markup', message=FALSE}
read_table2('hsb1.csv', skip = 5)
```

## Delimited Files

<hr>

maximum number of lines to read

```{r import48, echo=TRUE, results='markup', message=FALSE}
read_table2('hsb1.csv', n_max = 10)
```

## Delimited Files

<hr>

specify column types

```{r import49, echo=TRUE, results='markup', message=FALSE}
read_table2('hsb1.csv',
          col_types = list(col_integer(), col_factor(levels = c(0, 1)), 
                           col_factor(levels = c(1, 2, 3, 4)),
                           col_factor(levels = c(1, 2, 3)), 
                           col_factor(levels = c(1, 2)), 
                           col_factor(levels = c(1, 2, 3)),
                           col_integer(), col_integer(), col_integer(),
                           col_integer(), col_integer())            
)
```

## Delimited Files

<hr>

read only specific columns

```{r import50, echo=TRUE, results='markup', message=FALSE}
read_table2('hsb1.csv', 
          col_types = cols_only(id = col_integer(),
                                prog = col_factor(levels = c(1, 2, 3)),
                                read = col_integer())
)
```

## Delimited Files

<hr>

read .txt files

```{r import51, eval = FALSE}
read_csv('hsb.txt')  # incorrect
```

## Delimited Files

<hr>

```{r import52, eval = FALSE}
read_delim('hsb.txt', delim = ',')  # incorrect
```

## Delimited Files

<hr>

```{r import53, eval = FALSE}
read_table('hsb.txt')  # incorrect
```

## Delimited Files

<hr>

```{r import54, echo=TRUE, results='markup', message=FALSE}
read_table2('hsb.txt')  # correct
```


## Questions

<hr>

## Thank You

<hr>